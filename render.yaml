# Render Blueprint - Agent Juliette
# https://render.com/docs/blueprint-spec

services:
  - type: web
    name: agent-juliette
    runtime: python
    region: frankfurt
    plan: starter
    branch: main
    rootDir: .
    buildCommand: pip install uv && uv sync
    startCommand: uv run uvicorn main:app --host 0.0.0.0 --port $PORT
    healthCheckPath: /health
    envVars:
      # OpenAI
      - key: OPENAI_API_KEY
        sync: false
      - key: OPENAI_MODEL
        value: gpt-5-nano

      # Qdrant
      - key: QDRANT_URL
        sync: false
      - key: QDRANT_API_KEY
        sync: false
      - key: QDRANT_COLLECTION_NAME
        value: nana_intelligence_knowledge

      # Gmail OAuth2 (copier le contenu JSON des fichiers)
      # Depuis credentials.json - ouvrir le fichier et copier tout son contenu
      - key: GMAIL_CREDENTIALS_JSON
        sync: false
      # Depuis token.json - ouvrir le fichier et copier tout son contenu
      - key: GMAIL_TOKEN_JSON
        sync: false
      - key: GMAIL_SENDER_EMAIL
        sync: false
      # Chemins des fichiers (ne pas modifier)
      - key: GMAIL_CREDENTIALS_PATH
        value: ./credentials.json
      - key: GMAIL_TOKEN_PATH
        value: ./token.json

      # Application
      - key: APP_ENV
        value: production
      - key: LOG_LEVEL
        value: INFO
